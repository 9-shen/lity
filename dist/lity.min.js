/*! Lity - v2.0.0 - 2016-09-09
* http://sorgalla.com/lity/
* Copyright (c) 2015-2016 Jan Sorgalla; Licensed MIT */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(c){return b(a,c)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=b(a,require("jquery")):a.lity=b(a,a.jQuery||a.Zepto)}("undefined"!=typeof window?window:this,function(a,b){"use strict";function c(a){var b=w();return H&&a.length?(a.one(H,b.resolve),setTimeout(b.resolve,500)):b.resolve(),b.promise()}function d(a,c,d){if(1===arguments.length)return b.extend({},a);if("string"==typeof c){if("undefined"==typeof d)return"undefined"==typeof a[c]?null:a[c];a[c]=d}else b.extend(a,c);return this}function e(a){for(var b,c=decodeURI(a).split("&"),d={},e=0,f=c.length;e<f;e++)c[e]&&(b=c[e].split("="),d[b[0]]=b[1]);return d}function f(a,c){return a+(a.indexOf("?")>-1?"&":"?")+b.param(c)}function g(a){return b('<span class="lity-error"/>').append(a)}function h(a){if(!D.test(a))return!1;var c=b('<img src="'+a+'"/>'),d=w(),e=function(){d.reject(g("Failed loading image"))};return c.on("load",function(){return 0===this.naturalWidth?e():void d.resolve(c)}).on("error",e),d.promise()}function i(a,c){var d,e,f;try{d=b(a)}catch(g){return!1}return!!d.length&&(e=b('<i style="display:none !important"/>'),f=d.hasClass("lity-hide"),c.element().one("lity:remove",function(){e.before(d).remove(),f&&!d.closest(".lity-content").length&&d.addClass("lity-hide")}),d.removeClass("lity-hide").after(e))}function j(a){var c,d=a;return c=E.exec(a),c&&(d=f("https://www.youtube"+(c[2]||"")+".com/embed/"+c[4],b.extend({autoplay:1},e(c[5]||"")))),c=F.exec(a),c&&(d=f("https://player.vimeo.com/video/"+c[3],b.extend({autoplay:1},e(c[4]||"")))),c=G.exec(a),c&&(d=f("https://www.google."+c[3]+"/maps?"+c[6],{output:c[6].indexOf("layer=c")>0?"svembed":"embed"})),'<div class="lity-iframe-container"><iframe frameborder="0" allowfullscreen src="'+d+'"/></div>'}function k(){return u.documentElement.clientHeight?u.documentElement.clientHeight:Math.round(v.height())}function l(a){var b=q();b&&(27===a.keyCode&&b.close(),9===a.keyCode&&m(a,b))}function m(a,b){var c=b.element().find(B),d=c.index(u.activeElement);a.shiftKey&&d<=0?(c.get(c.length-1).focus(),a.preventDefault()):a.shiftKey||d!==c.length-1||(c.get(0).focus(),a.preventDefault())}function n(){b.each(y,function(a,b){b.resize()})}function o(a){1===y.unshift(a)&&(x.addClass("lity-active"),v.on({resize:n,keydown:l})),b("body > *").not(a.element()).addClass("lity-hidden").each(function(){var a=b(this);void 0===a.data(A)&&a.data(A,a.attr(z)||null)}).attr(z,"true")}function p(a){var c;a.element().attr(z,"true"),1===y.length&&(x.removeClass("lity-active"),v.off({resize:n,keydown:l})),y=b.grep(y,function(b){return a!==b}),c=y.length?y[0].element():b(".lity-hidden"),c.removeClass("lity-hidden").each(function(){var a=b(this),c=a.data(A);c?a.attr(z,c):a.removeAttr(z),a.removeData(A)})}function q(){return 0===y.length?null:y[0]}function r(a,c,d,e){var f,g="inline",h=b.extend({},d);return e&&h[e]?(f=h[e](a,c),g=e):(b.each(["inline","iframe"],function(a,b){delete h[b],h[b]=d[b]}),b.each(h,function(b,d){return!d||(f=d(a,c),!1!==f?(g=b,!1):void 0)})),{handler:g,content:f||""}}function s(a,e,f,g){function h(a){l=b(a).css("max-height",k()+"px"),j.find(".lity-loader").each(function(){var a=b(this);c(a).always(function(){a.remove()})}),j.removeClass("lity-loading").find(".lity-content").empty().append(l),l.find(B).first().focus(),n=!0,l.trigger("lity:ready",[m])}var i,j,l,m=this,n=!1,q=!1;e=b.extend({},C,e),j=b(e.template),m.element=function(){return j},m.opener=function(){return f},m.options=b.proxy(d,m,e),m.handlers=b.proxy(d,m,e.handlers),m.resize=function(){n&&!q&&l.css("max-height",k()+"px").trigger("lity:resize",[m])},m.close=function(){if(n&&!q){q=!0,p(m);var a=w();return g&&b.contains(j,u.activeElement)&&g.focus(),l.trigger("lity:close",[m]),j.removeClass("lity-opened").addClass("lity-closed"),c(l.add(j)).always(function(){l.trigger("lity:remove",[m]),j.remove(),j=void 0,a.resolve()}),a.promise()}},i=r(a,m,e.handlers,e.handler),j.attr(z,"false").addClass("lity-loading lity-opened lity-"+i.handler).appendTo("body").focus().on("click","[data-lity-close]",function(a){b(a.target).is("[data-lity-close]")&&m.close()}).trigger("lity:open",[m]),o(m),b.when(i.content).always(h)}function t(a,c,d){a.preventDefault?(a.preventDefault(),d=b(this),a=d.data("lity-target")||d.attr("href")||d.attr("src")):d=b(d);var e=new s(a,b.extend({},d.data("lity-options")||d.data("lity"),c),d,u.activeElement);if(!a.preventDefault)return e}var u=a.document,v=b(a),w=b.Deferred,x=b("html"),y=[],z="aria-hidden",A="lity-"+z,B='a[href],area[href],input:not([disabled]),select:not([disabled]),textarea:not([disabled]),button:not([disabled]),iframe,object,embed,[contenteditable],[tabindex]:not([tabindex^="-"])',C={handler:null,handlers:{image:h,inline:i,iframe:j},template:'<div class="lity" role="dialog" aria-label="Dialog Window (Press escape to close)" tabindex="-1"><div class="lity-wrap" data-lity-close role="document"><div class="lity-loader" aria-hidden="true">Loading...</div><div class="lity-container"><div class="lity-content"></div><button class="lity-close" type="button" aria-label="Close (Press escape to close)" data-lity-close>&times;</button></div></div></div>'},D=/(^data:image\/)|(\.(png|jpe?g|gif|svg|webp|bmp|ico|tiff?)(\?\S*)?$)/i,E=/(youtube(-nocookie)?\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed\/?)?([\w-]{11})(.*)?/i,F=/(vimeo(pro)?.com)\/(?:[^\d]+)?(\d+)\??(.*)?$/,G=/((maps|www)\.)?google\.([^\/\?]+)\/?((maps\/?)?\?)(.*)/i,H=function(){var a=u.createElement("div"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return b[c];return!1}();return t.version="2.0.0",t.options=b.proxy(d,t,C),t.handlers=b.proxy(d,t,C.handlers),t.current=q,b(u).on("click","[data-lity]",t),t});